####Install minikube
https://kubernetes.io/docs/tasks/tools/install-minikube/

####清除cluster
minikube delete -p fk8s
minikube delete -p hk8s

#### fk8s lab
minikube start --profile fk8s -n 3

kubectl config use-context fk8s
kubectl label no fk8s name=fk8s-master-0
kubectl label no fk8s-m02 name=fk8s-node-0
kubectl label no fk8s-m03 name=fk8s-node-1

kubectl taint nodes fk8s node-role.kubernetes.io/master=:NoSchedule

kubectl create ns pre-prod

####hk8s lab
minikube start --profile hk8s -n 4

####新增環境變數
vim ~/.bash_profile
export NO_PROXY=節點1_IP,節點2_IP,節點3_IP,節點4_IP
source ~/.bash_profile

kubectl config use-context hk8s
kubectl label no hk8s name=hk8s-master-0
kubectl label no hk8s-m02 name=hk8s-node-0
kubectl label no hk8s-m03 name=hk8s-node-1
kubectl label no hk8s-m04 name=hk8s-node-2

kubectl taint nodes hk8s node-role.kubernetes.io/master=:NoSchedule

minikube ssh -p hk8s -n hk8s-m04

#### work node 3 內部操作
cd /etc/kubernetes/
sudo mv kubelet.conf ./manifests/
sudo systemctl stop kubelet
sudo systemctl start kubelet
exit
#### work node 3 內部操作 END

kubectl create ns production
kubectl create ns development

####修改hk8s/hk8s.yaml
找到default-token-bqvk8字眼
改成secrets 的名字 (kubectl get secrets)

kubectl apply -f hk8s/hk8s.yaml
